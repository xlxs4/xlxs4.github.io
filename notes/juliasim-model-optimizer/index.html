<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=author  content="Orestis Ousoultzoglou"> <meta name=viewport  content="width=device-width, initial-scale=1"> # Google search console <meta name=google-site-verification  content=Zlo3y-QuxkNW_lgXWhxwyZiY8D7M8bmou1LzgkulkPo  /> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/css/frank.css"> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <link rel=icon  href="/images/profile/piano.jpg"> <title>JuliaSim Model Optimizer</title> <header> <div class=blog-name > <a href="/"> <span style="color:var(--color-yellow)"> <i class="fa fa-lightbulb-o" alt=""></i> </span> xlxs4 </a> </div> <nav> <ul> <li><a href="/about/">About</a> <li><a href="/notes/">Notes</a> <li><a href="/feed.xml"><i class="fa fa-rss"></i></a> </ul> <i class="fa fa-ellipsis-v" id=menu-icon ></i> </nav> </header> <div class=franklin-content > <div class=page-tag ><i class="fa fa-tag"></i><a href="/tag/julia/">julia</a>, <a href="/tag/modeling/">modeling</a>, <a href="/tag/sciml/">sciml</a></div> <div class=tag > <br> <span style="color:var(--color-grey)"> <i class="fa fa-book"></i> 8 minutes </span> </div> <div class=franklin-toc ><ol><li><a href="#juliasim_model_optimizer">JuliaSim Model Optimizer</a><li><a href="#juliasim">JuliaSim</a><ol><li><a href="#introduction">Introduction</a></ol><li><a href="#model_calibration">Model Calibration</a><ol><li><a href="#nonlinear_model_calibration">Nonlinear Model Calibration</a></ol><li><a href="#model_paradigms">Model Paradigms</a><ol><li><a href="#causal_modeling">Causal Modeling</a><li><a href="#acausal_modeling">Acausal Modeling</a></ol><li><a href="#modeling_toolkit">Modeling Toolkit</a><ol><li><a href="#description">Description</a><li><a href="#features">Features</a><li><a href="#equation_types">Equation Types</a></ol><li><a href="#modeling_toolkit_standard_library">Modeling Toolkit Standard Library</a><ol><li><a href="#background">Background</a></ol></ol></div> <h2 id=juliasim_model_optimizer ><a href="#juliasim_model_optimizer" class=header-anchor >JuliaSim Model Optimizer</a></h2> <p>Some time ago I attended a remote workshop titled &quot;Model Calibration and Parameter Estimation with JuliaSim Model Optimizer&quot; by the <a href="https://juliahub.com/company/about-us/">JuliaHub</a> team, specifically <a href="https://jvaverka.com/">Jacob Vaverka</a> and <a href="https://chrisrackauckas.com/">Dr. Christopher Rackauckas</a>. Here&#39;s some knowledge.</p> <h2 id=juliasim ><a href="#juliasim" class=header-anchor >JuliaSim</a></h2> <p><a href="https://juliahub.com/products/juliasim/">JuliaSim</a> is a cloud-hosted platform for physical simulation. It combines a vast array of bleeding edge <a href="https://sciml.ai/">SciML</a> techniques, acausal equation-based digital twin modeling and simulation and is powered by the <a href="https://julialang.org/">Julia</a> programming language. It is preview-only software in the time of writing this post &#40;December 2022&#41;.</p> <p>JuliaSim produces surrogates of blackbox &#40;and regular&#41; dynamical systems using <abbr title="Continuous Time Echo State Networks">CTESN</abbr> s <sup id="fnref:1"><a href="#fndef:1" class=fnref >[1]</a></sup>. This technique allows, amongst other features, for implicit training in parameter space to stabilize the ill-conditioning present in stiff systems.</p> <p>You can leverage these surrogates to accelerate the process and there&#39;s a variety of techniques for quantifying uncertainty and noise &#40;see the virtual populations below&#41;. You can use JuliaSim for parameter estimation and optimal control, which is what this post is about. There&#39;s the so-called <a href="https://help.juliahub.com/juliasim/stable/ModelLibrary/">Model Library</a>, a collection of acausal &#40;equation-based&#41; components with pre-trained surrogates of models that are ready to use. You can thus discover and import/exchange various models, and combine yours with pre-built models and digital twins. Lastly, there&#39;s specialized numerical environments available for use upon demand. Everything can happen on the JuliaHub cloud-based IDE.</p> <figure class=figure > <img src="./assets/juliahub.png" alt="A visual overview of JuliaHub." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> A visual overview of JuliaHub. </figcaption> </figure> <p>If you want to build models, you can use the pre-made model libraries, e.g. <a href="https://help.juliahub.com/CellMLPhysiome/dev/">CellMLPhysiome.jl</a> and <a href="https://help.juliahub.com/SBMLBioModels/stable/">SBMLBioModels.jl</a>. You can use the <a href="https://github.com/SciML/Catalyst.jl">Catalyst.jl</a> and <a href="https://github.com/SciML/ModelingToolkit.jl">ModelingToolkit.jl</a> GUIs. If you want to generate models using existing data, you can use a Digital Twin generator. If you want to generate data using existing models, you can use a Surrogatizer and more.</p> <figure class=figure > <img src="./assets/surrogatizer.png" alt="The JuliaSim Surrogatizer GUI." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> The JuliaSim Surrogatizer GUI. </figcaption> </figure> <figure class=figure > <img src="./assets/surrogate-dashboard.png" alt="The Surrogate Diagnostic Summary interactive dashboard." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> The Surrogate Diagnostic Summary interactive dashboard. </figcaption> </figure> <h3 id=introduction ><a href="#introduction" class=header-anchor >Introduction</a></h3> <figure class=figure > <img src="./assets/juliasim.png" alt="JuliaSim at a glance." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> JuliaSim at a glance. </figcaption> </figure> <p>The Model Optimizer is a Julia package available on the JuliaHub platform named <code>JuliaSimModelOptimizer</code>. It contains methodology to perform model calibration and analysis inside a <abbr title="High-Performance Computing">HPC</abbr> environment in a user-friendly manner. It&#39;s a robust and automated framework to scale large and complex models.</p> <h2 id=model_calibration ><a href="#model_calibration" class=header-anchor >Model Calibration</a></h2> <p>A typical model calibration pipeline looks like the following:</p> <ol> <li><p>First, simulate a parameter combination <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\theta_i</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.84444em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> somewhere in the parameter space. Feed the parameters in the model, which outputs the model prediction for <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\theta_i</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.84444em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</p> <li><p>Then collect &#40;experimental&#41; data for the same <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\theta_i</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.84444em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> combinations &#40;or vice-versa&#41;.</p> <li><p>Lastly, combine model prediction and observed data to tune <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\theta_i</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.84444em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> so that the prediction better fits the data, using a loss &#40;usually error&#41; function for optimization.</p> </ol> <figure class=figure > <img src="./assets/model-calibration.png" alt="Model calibration via optimization in Model Optimizer." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> Model calibration via optimization in Model Optimizer. </figcaption> </figure> <h3 id=nonlinear_model_calibration ><a href="#nonlinear_model_calibration" class=header-anchor >Nonlinear Model Calibration</a></h3> <p>There&#39;s three main challenges that can arise if trying to calibrate a model when nonlinearity is introduced. Nonlinear calibration is significantly harder, mainly because:</p> <ol> <li><p>Nonlinear optimization can easily hit local minima.</p> <li><p>Optimization procedures/algorithms are usually serial.</p> <li><p>Model parameters can be unidentifiable from data.</p> </ol> <figure class=figure > <img src="./assets/model-calibration-challenges.png" alt="The challenges of Nonlinear Calibration." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> The challenges of Nonlinear Calibration. </figcaption> </figure> <p>To address the first challenge — how do we avoid local optima? We can leverage specialized methods from Model Optimizer. There&#39;s a variety of calibration methods available. Which one to choose is going to ultimately depend on the specific problem at hand.</p> <p>To address the second challenge — how do we do effective parallelism on a particular strategy that we&#39;re deploying? How do we leverage large-scale cloud compute systems to solve these problems? Proper strategy selection plays a big role here. You can enable parallelism with certain calibration strategies. Multiple shooting is one example that can be parallelized, so if it&#39;s an effective strategy for the case at hand it can help us break out the serial of execution. Note that some of the available techniques are more amenable to distributed compute.</p> <figure class=figure > <img src="./assets/avoiding-local-optima.png" alt="Robust nonlinear calibration strategies." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> Robust nonlinear calibration strategies. </figcaption> </figure> <p>Lastly, to address the third challenge — how do we quantify the uncertainty in the fit? The answer is by introducing a Model Optimizer concept called Virtual Populations. Virtual Populations are sets of parameters which sufficiently fit all trials, all observations. A trial is a different variation of the model which can be ran, it describes an experiment. It&#39;s a data observation. We can have collections of trials, multiple trials. Having a collection allows us to define multi-simulation optimization problems. We&#39;ll see what this means in practice later on in this post, it essentially is a a way to synthesize data to repeat stochastic optimization to better understand the parameter landscape and be able to quantify the uncertainty of global optima in the conditions observed.</p> <figure class=figure > <img src="./assets/virtual-populations.png" alt="Quantifying uncertainty using Virtual Populations." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> Quantifying uncertainty using Virtual Populations. </figcaption> </figure> <h2 id=model_paradigms ><a href="#model_paradigms" class=header-anchor >Model Paradigms</a></h2> <p>So we&#39;ve seen how model calibration could work at a high level, we&#39;ve taken a look at some problems that might arise in nonlinear calibration, and how Model Optimizer tackles these problems, including the concept of virtual populations which is also very helpful for another reason we&#39;ll look into below. Before we get to really see how all of this could work in action, we need to discuss different modeling paradigms. How do we create these simulations and have something that we can apply these Model Optimizer techniques to?</p> <h3 id=causal_modeling ><a href="#causal_modeling" class=header-anchor >Causal Modeling</a></h3> <p>In causal modeling, we describe the causal mechanisms of a system. The way that this works is we provide clear rules for the interactions between functional blocks. Here we&#39;re worried about the flow of computation — one could draw an analogy linking causal modeling with the imperative programming paradigm.</p> <figure class=figure > <img src="./assets/causal-modeling.png" alt="Causal Block diagram in <a href='https://www.mathworks.com/products/simulink.html'>Simulink</a> by The Mathworks." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> Causal Block diagram in <a href='https://www.mathworks.com/products/simulink.html'>Simulink</a> by The Mathworks. </figcaption> </figure> <h3 id=acausal_modeling ><a href="#acausal_modeling" class=header-anchor >Acausal Modeling</a></h3> <p>Instead, in acausal modeling we describe the behavior and the properties of the model components. Then, the models are built up out of the composition of the components. The overall dynamics of the model fall out of the cumulative behavior of the composition. This is more akin to the declarative programming paradigm. We only worry about the connections and the relationships between these functional blocks — we don&#39;t want to frame the problem particularly in terms of the flow of computation that has to happen, we want to think instead about individual components and the relationships between one another.</p> <figure class=figure > <img src="./assets/acausal-modeling.png" alt="Acausal modeling in <a href='https://mtk.sciml.ai/dev/'>ModelingToolkit.jl</a>, part of the <a href='https://sciml.ai/'>SciML</a> suite." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> Acausal modeling in <a href='https://mtk.sciml.ai/dev/'>ModelingToolkit.jl</a>, part of the <a href='https://sciml.ai/'>SciML</a> suite. </figcaption> </figure> <p>There&#39;s some key advantages to following the acausal modeling paradigm. Acausal modeling can be expressive. This allows us to think like scientists and engineers instead of being limited in framing the problem only in terms of how to compute the results. Acausal modeling can be concise. This can allow us to build large-scale models by connecting well-tested components. Acausal modeling can be reusable. We can bring these well-tested components and entire component models with us to build new systems.</p> <figure class=figure > <img src="./assets/why-acausal-modeling.png" alt="Following the acausal modeling paradigm comes with important perks." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> Following the acausal modeling paradigm comes with important perks. </figcaption> </figure> <h2 id=modeling_toolkit ><a href="#modeling_toolkit" class=header-anchor >Modeling Toolkit</a></h2> <p><a href="https://mtk.sciml.ai/dev/">ModelingToolkit.jl</a> is a Julia acausal modeling framework and it will allow us to be expressive and concise when we write our <abbr title="Differential Equation">DE</abbr> models. It will also enable us to reuse these models so we can automatically rearrange equations for better stability. We&#39;re gonna get some extra perks here. We&#39;re gonna get optimal code by default, without having to worry about the most optimal way to compute these things — we just worry about the mechanics and then we get the optimal code for free. The code will also be parallelizable by default.</p> <figure class=figure > <img src="./assets/modeling-toolkit.png" alt="Acausal component-based modeling with <a href='https://mtk.sciml.ai/dev/'>ModelingToolkit.jl</a>." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> Acausal component-based modeling with <a href='https://mtk.sciml.ai/dev/'>ModelingToolkit.jl</a>. </figcaption> </figure> <h3 id=description ><a href="#description" class=header-anchor >Description</a></h3> <p>ModelingToolkit is a modeling language. It can do both symbolic and numeric computation. It is highly performant and parallel. It is extendable because it brings ideas from symbolic <abbr title="Computer Algebra System">CAS</abbr> and causal/acausal equation-based modeling frameworks, but also because it&#39;s built in Julia and it&#39;s easy to pry into the source and modify as we please.</p> <p>The high-level modeling process is as follows: the model can be input as a high-level description. Then, the model is analyzed and enhanced through symbolic preprocessing. ModelingToolkit allows for automatic transformations, such as index reduction, to be applied before solving in order to easily handle equations that could not have been solved without some sort of symbolic intervention.</p> <h3 id=features ><a href="#features" class=header-anchor >Features</a></h3> <ul> <li><p>Causal and acausal modeling &#40;<a href="https://www.mathworks.com/products/simulink.html">Simulink</a>/<a href="https://modelica.org/modelicalanguage.html">Modelica</a>&#41; .</p> <li><p>Automated model transformation, simplification, and composition.</p> <li><p>Automatic conversion of numerical models into symbolic models.</p> <li><p>Composition of models through the components, a lazy connection system, and tools for expanding/flattening</p> <li><p>Pervasive parallelism in symbolic computations and generated functions.</p> <li><p>Transformations like alias elimination and tearing of nonlinear systems for efficiently numerically handling large-scale systems of equations.</p> <li><p>The ability to use the entire <a href="https://github.com/JuliaSymbolics/Symbolics.jl">Symbolics.jl</a> CAS as part of the modeling process.</p> <li><p>Import models from common formats like <a href="https://sbml.org/">SBML</a>, <a href="https://www.cellml.org/">CellML</a>, <a href="https://bionetgen.org/">BioNetGen</a>, and more.</p> <li><p>Extendability: the whole system is written in pure <a href="https://julialang.org/">Julia</a>, so adding new functions, simplification rules, and model transformations has no barrier.</p> </ul> <h3 id=equation_types ><a href="#equation_types" class=header-anchor >Equation Types</a></h3> <ul> <li><p><a href="https://www.wikiwand.com/en/Ordinary_differential_equation">Ordinary differential equations</a></p> <li><p><a href="https://www.wikiwand.com/en/Stochastic_differential_equation">Stochastic differential equations</a></p> <li><p><a href="https://www.wikiwand.com/en/Partial_differential_equation">Partial differential equations</a></p> <li><p><a href="https://www.wikiwand.com/en/Nonlinear_system">Nonlinear systems</a></p> <li><p><a href="https://www.wikiwand.com/en/Optimization_problem">Optimization problems</a></p> <li><p><a href="https://www.wikiwand.com/en/Continuous-time_Markov_chain">Continuous-Time Markov Chains</a></p> <li><p><a href="https://www.wikiwand.com/en/Chemical_reaction_network_theory">Chemical Reactions</a> &#40;via <a href="https://docs.sciml.ai/Catalyst/stable/">Catalyst.jl</a>&#41;</p> <li><p><a href="https://www.wikiwand.com/en/Optimal_control">Nonlinear Optimal Control</a></p> </ul> <h2 id=modeling_toolkit_standard_library ><a href="#modeling_toolkit_standard_library" class=header-anchor >Modeling Toolkit Standard Library</a></h2> <p>We could just use Modeling Toolkit but, if possible, we should try to use the Modeling Toolkit Standard Library, <a href="https://docs.sciml.ai/ModelingToolkitStandardLibrary/stable/">ModelingToolkitStandardLibrary.jl</a>. The standard library contains pre-built components that we can leverage to dive directly into the engineering and not focus as much on the math and the programming of building everything up from scratch.</p> <figure class=figure > <img src="./assets/standard-library.png" alt="ModelingToolkit Standard Library." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> ModelingToolkit Standard Library. </figcaption> </figure> <h3 id=background ><a href="#background" class=header-anchor >Background</a></h3> <p>The library defines well-tested acausal connections. In Physical Network Acausal modeling each physical domain must define a connector to combine the model components. Each physical domain connector defines a minimum of two variables, the Through and the Across variable. The through variable is a time derivative of some conserved quantity. The conserved quantity is expressed by the across variable. Generally, the physical system is given by:</p> <ul> <li><p>Energy dissipation: <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant=normal >∂</mi><mi>a</mi><mi>c</mi><mi>r</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><mrow><mi mathvariant=normal >∂</mi><mi>t</mi></mrow></mfrac><mo>⋅</mo><msub><mi>c</mi><mn>1</mn></msub><mo>=</mo><mi>t</mi><mi>h</mi><mi>r</mi><mi>o</mi><mi>u</mi><mi>g</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">\frac{\partial across}{\partial t} \cdot c_1 = through</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.2251079999999999em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.8801079999999999em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">cross</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >⋅</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.58056em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal">c</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">ro</span><span class="mord mathnormal" style="margin-right:0.03588em;">ug</span><span class="mord mathnormal">h</span></span></span></span></p> <li><p>Flow: <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>h</mi><mi>r</mi><mi>o</mi><mi>u</mi><mi>g</mi><mi>h</mi><mo>⋅</mo><msub><mi>c</mi><mn>2</mn></msub><mo>=</mo><mi>a</mi><mi>c</mi><mi>r</mi><mi>o</mi><mi>s</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">through \cdot c_2 = across</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">ro</span><span class="mord mathnormal" style="margin-right:0.03588em;">ug</span><span class="mord mathnormal">h</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >⋅</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.58056em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal">c</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">cross</span></span></span></span></p> </ul> <p>For example, for the electrical domain the across variable is voltage, and the through variable is current. So:</p> <ul> <li><p>Energy dissipation: <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant=normal >∂</mi><mi>v</mi><mi>o</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow><mrow><mi mathvariant=normal >∂</mi><mi>t</mi></mrow></mfrac><mo>⋅</mo><mi>c</mi><mi>a</mi><mi>p</mi><mi>a</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>=</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\frac{\partial voltage}{\partial t} \cdot capacitance = current</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.277216em;vertical-align:-0.345em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.9322159999999999em;"><span style="top:-2.6550000000000002em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">t</span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">lt</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >⋅</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">a</span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord mathnormal">ce</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">u</span><span class="mord mathnormal">rre</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span></p> <li><p>Flow: <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>⋅</mo><mi>r</mi><mi>e</mi><mi>s</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mo>=</mo><mi>v</mi><mi>o</mi><mi>l</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">current \cdot resistance = voltage</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">u</span><span class="mord mathnormal">rre</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span><span class=mbin >⋅</span><span class=mspace  style="margin-right:0.2222222222222222em;"></span></span><span class=base ><span class=strut  style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">res</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord mathnormal">ce</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2777777777777778em;"></span></span><span class=base ><span class=strut  style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">o</span><span class="mord mathnormal">lt</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span></span></span></span></p> </ul> <table class=fndef  id="fndef:1"> <tr> <td class=fndef-backref ><a href="#fnref:1">[1]</a> <td class=fndef-content >Anantharaman, R., Ma, Y., Gowda, S., Laughman, C., Shah, V., Edelman, A., &amp; Rackauckas, C. &#40;2020&#41;. Accelerating simulation of stiff nonlinear systems using continuous-time echo state networks. <em>arXiv preprint arXiv:2010.04004</em>. </table> <div class=back-to-top > <span><a href="#" title="Back to Top"><i class="fa fa-chevron-circle-up"></i></a></span> </div> <div class=page-foot > <div class=copyright > <span><i class="fa fa-creative-commons"></i> 2022 <a href="/">Orestis Ousoultzoglou</a></span> <span><a rel=license  href="/about/#license">License</a></span> <span><a href="/about/#privacy_policy">Privacy Policy</a></span> </div> <div class=copyright > <span>Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a></span> </div> </div> </div> </div><!--content--> </div><!--container-->