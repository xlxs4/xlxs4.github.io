<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=author  content="Orestis Ousoultzoglou"> <meta name=viewport  content="width=device-width, initial-scale=1"> # Google search console <meta name=google-site-verification  content=Zlo3y-QuxkNW_lgXWhxwyZiY8D7M8bmou1LzgkulkPo  /> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/css/frank.css"> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <link rel=icon  href="/images/profile/piano.jpg"> <title>JuliaSim Model Optimizer</title> <header> <div class=blog-name > <a href="/"> <span style="color:var(--color-yellow)"> <i class="fa fa-lightbulb-o" alt=""></i> </span> xlxs4 </a> </div> <nav> <ul> <li><a href="/about/">About</a> <li><a href="/notes/">Notes</a> <li><a href="/feed.xml"><i class="fa fa-rss"></i></a> </ul> <i class="fa fa-ellipsis-v" id=menu-icon ></i> </nav> </header> <div class=franklin-content > <div class=page-tag ><i class="fa fa-tag"></i><a href="/tag/julia/">julia</a>, <a href="/tag/modeling/">modeling</a>, <a href="/tag/sciml/">sciml</a></div> <div class=tag > <br> <span style="color:var(--color-grey)"> <i class="fa fa-book"></i> 3 minutes </span> </div> <div class=franklin-toc ><ol><li><a href="#juliasim_model_optimizer">JuliaSim Model Optimizer</a><ol><li><a href="#juliasim">JuliaSim</a><li><a href="#introduction">Introduction</a><ol><li><a href="#model_calibration">Model Calibration</a></ol></ol></ol></div> <h2 id=juliasim_model_optimizer ><a href="#juliasim_model_optimizer" class=header-anchor >JuliaSim Model Optimizer</a></h2> <p>Some time ago I attended a remote workshop titled &quot;Model Calibration and Parameter Estimation with JuliaSim Model Optimizer&quot; by the <a href="https://juliahub.com/company/about-us/">JuliaHub</a> team, specifically <a href="https://jvaverka.com/">Jacob Vaverka</a> and <a href="https://chrisrackauckas.com/">Dr. Christopher Rackauckas</a>.</p> <h3 id=juliasim ><a href="#juliasim" class=header-anchor >JuliaSim</a></h3> <p><a href="https://juliahub.com/products/juliasim/">JuliaSim</a> is a cloud-hosted platform for physical simulation. It combines a vast array of bleeding edge <a href="https://sciml.ai/">SciML</a> techniques, acausal equation-based digital twin modeling and simulation and is powered by the <a href="https://julialang.org/">Julia</a> programming language. It is preview-only software in the time of writing this post &#40;December 2022&#41;.</p> <p>JuliaSim produces surrogates of blackbox &#40;and regular&#41; dynamical systems using <abbr title="Continuous Time Echo State Networks">CTESN</abbr> s <sup id="fnref:1"><a href="#fndef:1" class=fnref >[1]</a></sup>. This technique allows, amongst other features, for implicit training in parameter space to stabilize the ill-conditioning present in stiff systems.</p> <p>You can leverage these surrogates to accelerate the process and there&#39;s a variety of techniques for quantifying uncertainty and noise &#40;see the virtual populations below&#41;. You can use JuliaSim for parameter estimation and optimal control, which is what this post is about. There&#39;s the so-called <a href="https://help.juliahub.com/juliasim/stable/ModelLibrary/">Model Library</a>, a collection of acausal &#40;equation-based&#41; components with pre-trained surrogates of models that are ready to use. You can thus discover and import/exchange various models, and combine yours with pre-built models and digital twins. Lastly, there&#39;s specialized numerical environments available for use upon demand. Everything can happen on the JuliaHub cloud-based IDE.</p> <figure class=figure > <img src="./assets/juliahub.png" alt="A visual overview of JuliaHub." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> A visual overview of JuliaHub. </figcaption> </figure> <p>If you want to build models, you can use the pre-made model libraries, e.g. <a href="https://help.juliahub.com/CellMLPhysiome/dev/">CellMLPhysiome.jl</a> and <a href="https://help.juliahub.com/SBMLBioModels/stable/">SBMLBioModels.jl</a>. You can use the <a href="https://github.com/SciML/Catalyst.jl">Catalyst.jl</a> and <a href="https://github.com/SciML/ModelingToolkit.jl">ModelingToolkit.jl</a> GUIs. If you want to generate models using existing data, you can use a Digital Twin generator. If you want to generate data using existing models, you can use a Surrogatizer and more.</p> <figure class=figure > <img src="./assets/surrogatizer.png" alt="The JuliaSim Surrogatizer GUI." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> The JuliaSim Surrogatizer GUI. </figcaption> </figure> <figure class=figure > <img src="./assets/surrogate-dashboard.png" alt="The Surrogate Diagnostic Summary interactive dashboard." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> The Surrogate Diagnostic Summary interactive dashboard. </figcaption> </figure> <h3 id=introduction ><a href="#introduction" class=header-anchor >Introduction</a></h3> <figure class=figure > <img src="./assets/juliasim.png" alt="JuliaSim at a glance." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> JuliaSim at a glance. </figcaption> </figure> <p>The Model Optimizer is a Julia package available on the JuliaHub platform named <code>JuliaSimModelOptimizer</code>. It contains methodology to perform model calibration and analysis inside a <abbr title="High-Performance Computing">HPC</abbr> environment in a user-friendly manner. It&#39;s a robust and automated framework to scale large and complex models.</p> <h4 id=model_calibration ><a href="#model_calibration" class=header-anchor >Model Calibration</a></h4> <p>A typical model calibration pipeline looks like the following:</p> <ol> <li><p>First, simulate a parameter combination <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\theta_i</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.84444em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> somewhere in the parameter space. Feed the parameters in the model, which outputs the model prediction for <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\theta_i</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.84444em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</p> <li><p>Then collect &#40;experimental&#41; data for the same <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\theta_i</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.84444em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> combinations &#40;or vice-versa&#41;.</p> <li><p>Lastly, combine model prediction and observed data to tune <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\theta_i</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.84444em;vertical-align:-0.15em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> so that the prediction better fits the data, using a loss &#40;usually error&#41; function for optimization.</p> </ol> <figure class=figure > <img src="./assets/model-calibration.png" alt="Model calibration via optimization in Model Optimizer." class="figure-img img-fluid " width="" > <figcaption class="figure-caption "> Model calibration via optimization in Model Optimizer. </figcaption> </figure> <table class=fndef  id="fndef:1"> <tr> <td class=fndef-backref ><a href="#fnref:1">[1]</a> <td class=fndef-content >Anantharaman, R., Ma, Y., Gowda, S., Laughman, C., Shah, V., Edelman, A., &amp; Rackauckas, C. &#40;2020&#41;. Accelerating simulation of stiff nonlinear systems using continuous-time echo state networks. <em>arXiv preprint arXiv:2010.04004</em>. </table> <div class=back-to-top > <span><a href="#" title="Back to Top"><i class="fa fa-chevron-circle-up"></i></a></span> </div> <div class=page-foot > <div class=copyright > <span><i class="fa fa-creative-commons"></i> 2022 <a href="/">Orestis Ousoultzoglou</a></span> <span><a rel=license  href="/about/#license">License</a></span> <span><a href="/about/#privacy_policy">Privacy Policy</a></span> </div> <div class=copyright > <span>Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a></span> </div> </div> </div> </div><!--content--> </div><!--container-->